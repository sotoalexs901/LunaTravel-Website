<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rastreo | Luna Travel</title>

    <link rel="stylesheet" href="/css/styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Encabezado -->
    <header class="navbar">
      <div class="container">
        <a href="/" class="logo">Luna Travel</a>
        <nav>
          <ul class="menu">
            <li><a href="/servicios">Servicios</a></li>
            <li><a href="/precios">Precios</a></li>
            <li><a href="/tracking" class="active">Rastreo</a></li>
            <li><a href="/contacto">Cont谩ctanos</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- Contenido principal -->
    <main class="tracking-container">
      <h1>Rastrea tu equipaje</h1>
      <p>
        Consulta el estado y ubicaci贸n de tu equipaje ingresando el n煤mero de orden.
      </p>

      <div class="tracking-form">
        <input
          type="text"
          id="orderNumber"
          placeholder="Ejemplo: LT-1234"
          required
        />
        <button id="buscarBtn">Buscar</button>
      </div>

      <div id="resultado" class="tracking-result"></div>
    </main>

    <!-- Firebase -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
      import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

      // З Configuraci贸n Firebase usando variables de entorno
      const firebaseConfig = {
        apiKey: import.meta.env.VITE_API_KEY,
        authDomain: import.meta.env.VITE_AUTH_DOMAIN,
        projectId: import.meta.env.VITE_PROJECT_ID,
        measurementId: import.meta.env.VITE_MEASUREMENT_ID,
      };

      // Inicializar Firebase y Firestore
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      //  Funci贸n de b煤squeda
      async function buscarEquipaje() {
        const orderId = document.getElementById("orderNumber").value.trim();
        const resultado = document.getElementById("resultado");

        if (!orderId) {
          resultado.innerHTML = "<p>Por favor ingresa un n煤mero de orden.</p>";
          return;
        }

        try {
          const docRef = doc(db, "luggage", orderId);
          const docSnap = await getDoc(docRef);

          if (docSnap.exists()) {
            const data = docSnap.data();
            resultado.innerHTML = `
              <div class="card">
                <p><strong>Estado:</strong> ${data.estado}</p>
                <p><strong>Ubicaci贸n:</strong> ${data.ubicacion}</p>
                <p><strong>ltima actualizaci贸n:</strong> ${data.fecha}</p>
              </div>
            `;
          } else {
            resultado.innerHTML = "<p>No se encontr贸 informaci贸n para ese n煤mero de orden.</p>";
          }
        } catch (error) {
